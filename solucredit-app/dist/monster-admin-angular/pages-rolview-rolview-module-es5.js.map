{"version":3,"sources":["webpack:///src/app/pages/rolview/rolview.component.html","webpack:///src/app/pages/rolview/rolview.component.ts","webpack:///src/app/pages/rolview/rolview.module.ts","webpack:///src/app/services/rolview.service.ts"],"names":["RolviewComponent","_rolViewService","spinner","modalService","fb","_rolservice","spinnerMessage","placeholder","search","q","pageSize","page","dataActivities","countActivities","isEditing","showViews","allViews","RolForm","group","RolName","required","Permissions","allCheckForm","show","getInfo","hide","isLoadingInEdition","console","log","getAllViews","getActivities","getCountRoles","getViews","toPromise","then","response","i","getCountRols","wf_activity_id","rols","length","getCountViews","views","count","dataviews","searchItem","controls","value","push","getRols","rolviews","res","e","targetModal","open","centered","backdrop","keyboard","windowClass","size","dismissAll","ngOnInit","rol","modal","actualActivity","setValue","name","disable","getShowViews","getRolForViews","wf_view_id","response2","openModal","activity","find","item","is_default","find2","changeDefault","closeBtnClick","isCalculatinPermissions","allrols","data","rol_id","allviews","checks","findview","auxrols","j","check","id","event","view","findIndex","target","checked","saveRols","filter","selector","templateUrl","styleUrls","routes","path","title","urls","url","component","RolviewModule","forChild","declarations","imports","httpOptions","headers","responseType","observe","RolviewService","http","limit","offset","uri","urlRolView","get","pipe","body","activity_id","view_id","format","post","put","providedIn"],"mappings":"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","file":"pages-rolview-rolview-module-es5.js","sourcesContent":["<div class=\"col-12\">\r\n    <div class=\"card card-body\">\r\n        <ngx-spinner bdColor=\"rgba(51,51,51,0.8)\" size=\"medium\" color=\"#759ee0\" type=\"ball-scale-multiple\">\r\n            <p style=\"font-size: 20px; color:#fff\">{{spinnerMessage}}</p>\r\n        </ngx-spinner>\r\n\r\n        <div class=\"d-flex mb-3 mt-3 col-lg-12\">\r\n            <!-- <input type=\"text\" class=\"form-control w-25\" placeholder=\"Busca a un empleado\" [(ngModel)]='searchTerm'> -->\r\n            <div class=\"col-lg-3\">\r\n                <form [formGroup]=\"search\">\r\n                    <div class=\"row\">\r\n                        <div class=\"col-sm-12 col-lg-12\">\r\n                            <div class=\"form-group row\">\r\n                                <div class=\"input-group col-sm-12\">\r\n                                    <div class=\"input-group-prepend\">\r\n                                        <span class=\"input-group-text\" id=\"basic-addon1\">\r\n                                            <i class=\"ti-search\"></i>\r\n                                        </span>\r\n                                    </div>\r\n\r\n                                    <input class=\"form-control\" formControlName=\"q\" (change)=\"filter()\"\r\n                                        [placeholder]=\"placeholder\" type=\"text\" />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n        <div *ngIf=\"canList()\" class=\"table-responsive table-hover\">\r\n            <table class=\"table table-responsive-lg  v-middle white-table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th class=\"text-center\" scope=\"col\">#</th>\r\n                        <th scope=\"col\" class=\"text-center\">Actividades</th>\r\n                        <th scope=\"col\" class=\"text-center\">Proceso</th>\r\n                        <th scope=\"col\" class=\"text-center\">Roles asignados</th>\r\n                        <th scope=\"col\" class=\"text-center\">Vistas asignadas</th>\r\n                        <th scope=\"col\" class=\"text-center\">Vista predeterminada</th>\r\n                        <th scope=\"col\" class=\"text-center\">Acciones</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor=\"let activity of dataActivities;let i=index;\">\r\n\r\n                        <!--  <td *ngIf=\"marcarvarios\" class=\"text-center\">\r\n                            {{rol.rol_id}}\r\n                        </td> -->\r\n                        <td class=\"text-center\">\r\n                            {{i+1}}\r\n                        </td>\r\n                        <td class=\"text-left\">\r\n                            {{activity.name}}\r\n                        </td>\r\n                        <td>\r\n                            {{activity.wf_workflow_id==1?'Pagaré':'Cupo'}}\r\n                        </td>\r\n                        <td>\r\n                            {{activity.rols}}\r\n                        </td>\r\n                        <td>\r\n                            {{activity.views}}\r\n                        </td>\r\n                        <td>\r\n                            {{getDefault(activity)}}\r\n                        </td>\r\n                        <td>\r\n                            <div class=\"div-table-actions\">\r\n                                <button *ngIf=\"canEdit()\" (click)=\"editar(activity,createModal)\"\r\n                                    class=\"btn  btn-color-solucredit\" type=\"button\"><span class=\"btn-label m-r-5\"><i\r\n                                            class=\"mdi mdi-eye-outline\"></i></span>Editar</button>\r\n                                <button *ngIf=\"canEdit()\" (click)=\"editar(activity,editview)\"\r\n                                    class=\"btn  btn-color-solucredit\" type=\"button\"><span class=\"btn-label m-r-5\"><i\r\n                                            class=\"fas fa-edit\"></i></span>Predeterminada</button>\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <div class=\"d-flex justify-content-center p-2\">\r\n\r\n                <ngb-pagination [collectionSize]=\"this.countActivities\" [pageSize]=\"pageSize\" [(page)]=\"page\"\r\n                    aria-label=\"Default pagination\" (pageChange)=\"pageChange($event)\"></ngb-pagination>\r\n            </div>\r\n            <!-- <div class=\"d-flex justify-content-center mt-5\">\r\n                <ngb-pagination [(page)]=\"page\" [pageSize]=\"pageSize\" [collectionSize]=\"userList.length\"></ngb-pagination>\r\n            </div> -->\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n<ng-template #editview let-modal>\r\n    <div class=\"modal-header\">\r\n        <h5 class=\"modal-title\" id=\"editUserLabel\">Vista predeterminada</h5>\r\n        <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"closeBtnClick()\">\r\n            <span aria-hidden=\"true\">&times;</span>\r\n        </button>\r\n\r\n    </div>\r\n    <div class=\"modal-body\">\r\n        <div *ngIf=\"canList()\" class=\"table-responsive table-hover\">\r\n            <table class=\"table table-responsive-lg  v-middle white-table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th class=\"text-center\" scope=\"col\">#</th>\r\n                        <th scope=\"col\" class=\"text-center\">Vista</th>\r\n                        <th scope=\"col\" class=\"text-center\">Acciones</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor=\"let activity of actualActivity.dataviews;let i=index;\">\r\n\r\n                        <!--  <td *ngIf=\"marcarvarios\" class=\"text-center\">\r\n                            {{rol.rol_id}}\r\n                        </td> -->\r\n                        <td class=\"text-center\">\r\n                            {{i+1}}\r\n                        </td>\r\n                        <td class=\"text-left\">\r\n                            {{getNameView(activity)}}\r\n                        </td>\r\n                        <td>\r\n                            <div class=\"div-table-actions\">\r\n                                <button *ngIf=\"canEdit() && activity.is_default==0\" (click)=\"changeDefault(activity,1)\"\r\n                                    class=\"btn  btn-color-solucredit\" type=\"button\"><span class=\"btn-label m-r-5\"><i\r\n                                            class=\"fas fa-plus\"></i></span>Agregar</button>\r\n                                <button *ngIf=\"canEdit()&& activity.is_default==1\" (click)=\"changeDefault(activity,0)\"\r\n                                    class=\"btn btn-danger\" type=\"button\"><span class=\"btn-label m-r-5\"><i\r\n                                            class=\"fas fa-times\"></i></span>Remover</button>\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n<ng-template #createModal let-modal>\r\n    <div class=\"modal-header\">\r\n\r\n        <h5 class=\"modal-title\" id=\"editUserLabel\">Edicion de actividad</h5>\r\n\r\n        <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"closeBtnClick()\">\r\n            <span aria-hidden=\"true\">&times;</span>\r\n        </button>\r\n\r\n    </div>\r\n    <div class=\"modal-body\">\r\n        <div class=\"row\">\r\n            <div class=\"col-12\">\r\n                <ngx-spinner [name]=\"'spnn'\" bdColor=\"rgba(0, 0, 0, 0.8) \" size=\"medium \" color=\"#759ee0 \"\r\n                    type=\"ball-atom \" [fullScreen]=\"false \">\r\n                    <p style=\"color: white \"> Cambiando Estatus ... </p>\r\n                </ngx-spinner>\r\n                <ng-container [ngSwitch]=\"actualActivity\">\r\n                    <ng-container *ngSwitchCase=\"null\">\r\n                        <h6>Cargando</h6>\r\n                    </ng-container>\r\n                    <ng-container *ngSwitchDefault>\r\n                        <form [formGroup]=\"RolForm\">\r\n                            <div class=\"form-group row\">\r\n                                <label for=\"fname\"\r\n                                    class=\"col-sm-3 text-right control-label col-form-label\">Nombre</label>\r\n                                <div class=\"col-sm-9\">\r\n                                    <div class=\"input-group col-sm-12\">\r\n                                        <div class=\"input-group-prepend \">\r\n                                            <span class=\"input-group-text \" id=\"basic-addon1\">\r\n                                                <i class=\" icon-note\"></i>\r\n                                            </span>\r\n                                        </div>\r\n\r\n                                        <input [value]=\"actualActivity.name\" formControlName=\"RolName\" type=\"text\"\r\n                                            class=\"form-control\" id=\"fname\" placeholder=\"nombre del nuevo rol\">\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </form>\r\n                        <div class=\"card-body\">\r\n                            <div class=\"card-body div-con-flex-col\">\r\n                                <app-spinner *ngIf=\"isLoadingInEdition\"></app-spinner>\r\n                                <div *ngIf=\"!isEditing &&!isLoadingInEdition\" class=\"col-sm-12\">\r\n                                    <h3>Permisos</h3>\r\n                                    <nz-tabset nzSize=\"large\">\r\n                                        <nz-tab [nzTitle]=\"dat.name\" *ngFor=\"let dat of showViews;let i = index \">\r\n                                            <div class=\"bitacora-layout\">\r\n\r\n                                                <div class=\"table-responsive table-hover\">\r\n                                                    <table class=\"table table-responsive-lg v-middle white-table\">\r\n                                                        <tbody>\r\n                                                            <tr *ngFor=\"let permission of dat.rol\">\r\n\r\n                                                                <td width=\"150\">\r\n                                                                    <div class=\"text-left\">\r\n                                                                        <label style=\"font-size:16px\">\r\n                                                                            {{permission.rol==null?'Usuario':permission.rol.name}}\r\n                                                                        </label>\r\n                                                                    </div>\r\n                                                                </td>\r\n\r\n\r\n                                                            </tr>\r\n                                                        </tbody>\r\n                                                    </table>\r\n                                                </div>\r\n                                            </div>\r\n                                        </nz-tab>\r\n                                    </nz-tabset>\r\n\r\n                                </div>\r\n                                <div *ngIf=\"isEditing &&!isCalculatinPermissions\" class=\"col-sm-12\">\r\n                                    <h3>Permisos</h3>\r\n                                    <nz-tabset nzSize=\"large\">\r\n                                        <nz-tab [nzTitle]=\"dat.name\" *ngFor=\"let dat of allCheckForm;let i = index \">\r\n                                            <div class=\"bitacora-layout\">\r\n\r\n                                                <div class=\"table-responsive table-hover\">\r\n                                                    <table\r\n                                                        class=\"table table-responsive-lg no-wrap v-middle white-table\">\r\n                                                        <tbody>\r\n                                                            <tr *ngFor=\"let data of dat.checks\">\r\n                                                                <td *ngIf=\"isEditing && !isCalculatinPermissions\"\r\n                                                                    width=\"50\" class=\"text-center\">\r\n                                                                    <label>\r\n                                                                        <input type=\"checkbox\" [checked]=\"data.value\"\r\n                                                                            [value]=\"data.id\"\r\n                                                                            (change)=\"onCheckChange($event,dat,data)\">\r\n                                                                    </label>\r\n\r\n                                                                </td>\r\n                                                                <td width=\"150\">\r\n                                                                    <div class=\"text-left\">\r\n                                                                        <label style=\"font-size:16px\">\r\n                                                                            {{data.name==null?'USUARIO':data.name}}\r\n                                                                        </label>\r\n                                                                    </div>\r\n                                                                </td>\r\n                                                            </tr>\r\n                                                        </tbody>\r\n                                                    </table>\r\n                                                </div>\r\n                                            </div>\r\n                                        </nz-tab>\r\n                                    </nz-tabset>\r\n\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"card-body\">\r\n                            <div class=\"form-group m-b-0 text-right\">\r\n                                <button *ngIf=\"!isEditing\" type=\"submit\" class=\"btn btn-color-solucredit\"\r\n                                    (click)=\"startMod()\">Modificar</button>\r\n                                <button *ngIf=\"isEditing\" type=\"button\" class=\"btn btn-color-solucredit\"\r\n                                    (click)=\"saveChanges()\">Guardar cambios</button>\r\n                                <button *ngIf=\"isEditing\" type=\"button\"\r\n                                    class=\"btn btn-raised mr-1 text-white btn-color-solucredit-secondary\"\r\n                                    (click)=\"closeBtnClick()\">Cancelar</button>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                    </ng-container>\r\n                </ng-container>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-template>","import { Component, OnInit } from '@angular/core';\r\nimport { async } from '@angular/core/testing';\r\nimport { FormArray, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { NgxSpinnerService } from 'ngx-spinner';\r\nimport { RolviewService } from 'src/app/services/rolview.service';\r\nimport { RolService } from '../rol/services/rol.service';\r\n\r\n@Component({\r\n  selector: 'app-rolview',\r\n  templateUrl: './rolview.component.html',\r\n  styleUrls: ['./rolview.component.scss']\r\n})\r\nexport class RolviewComponent implements OnInit {\r\n  spinnerMessage = 'Cargando Información...';\r\n  placeholder = 'Buscar rol';\r\n  search = new FormGroup({\r\n    q: new FormControl(''),\r\n  })\r\n  pageSize = 10;\r\n  page = 1;\r\n  dataActivities = []\r\n  countActivities = 0\r\n  actualActivity;\r\n  isEditing = false;\r\n  showViews = []\r\n  public isCalculatinPermissions: boolean;\r\n  public isLoadingInEdition: boolean;\r\n  allViews: any[] = []\r\n  RolForm = this.fb.group({\r\n    RolName: ['', [Validators.required]],\r\n    Permissions: new FormArray([])\r\n  });\r\n  allCheckForm: any[] = []\r\n  constructor(\r\n    private _rolViewService: RolviewService,\r\n    private spinner: NgxSpinnerService,\r\n    private modalService: NgbModal,\r\n    public fb: FormBuilder,\r\n    private _rolservice: RolService\r\n  ) { }\r\n\r\n  async ngOnInit() {\r\n    this.spinner.show()\r\n    await this.getInfo()\r\n    this.spinner.hide()\r\n    this.isLoadingInEdition = false;\r\n    console.log(this.dataActivities)\r\n    await this.getAllViews()\r\n  }\r\n  async getInfo() {\r\n    this.spinner.show()\r\n    await this.getActivities()\r\n    await this.getCountRoles()\r\n    await this.getViews()\r\n    await this.getAllViews()\r\n    this.spinner.hide()\r\n    debugger\r\n    return\r\n  }\r\n  async getAllViews() {\r\n    await this._rolViewService.getAllViews().toPromise()\r\n      .then((response) => {\r\n        this.allViews = response\r\n      })\r\n    return\r\n  }\r\n  async getCountRoles() {\r\n    for (let i = 0; i < this.dataActivities.length; i++) {\r\n      //tenemos que ver cuantos roles tiene\r\n      await this._rolViewService.getCountRols(this.dataActivities[i].wf_activity_id).toPromise()\r\n        .then((response) => {\r\n          this.dataActivities[i].rols = response\r\n        })\r\n    }\r\n    return\r\n  }\r\n  async getViews() {\r\n    for (let i = 0; i < this.dataActivities.length; i++) {\r\n      //tenemos que ver cuantos roles tiene\r\n      await this._rolViewService.getCountViews(this.dataActivities[i].wf_activity_id).toPromise()\r\n        .then((response) => {\r\n\r\n          this.dataActivities[i].views = response.count\r\n          this.dataActivities[i].dataviews = response.views\r\n        })\r\n    }\r\n    return\r\n  }\r\n  async getActivities() {\r\n    let searchItem = [];\r\n\r\n    if (this.search.controls['q'].value != \"\") {\r\n      searchItem.push('%' + this.search.controls['q'].value + '%');\r\n    }\r\n    const res = await this._rolViewService.getRols(this.pageSize, (this.page - 1) * this.pageSize, searchItem).toPromise().then(\r\n      (response) => {\r\n        console.log(response)\r\n        this.dataActivities = response.rolviews\r\n        this.countActivities = response.count\r\n      }\r\n    )\r\n    return res\r\n  }\r\n  filter() {\r\n    this.getInfo()\r\n  }\r\n  canCreate(): boolean {\r\n    return true\r\n  }\r\n  canList(): boolean {\r\n    return true\r\n  }\r\n  canDelete(): boolean {\r\n    return true\r\n  }\r\n  canView(): boolean {\r\n    return true\r\n  }\r\n  canEdit(): boolean {\r\n    return true\r\n  }\r\n  pageChange(e) {\r\n    //console.log(e);\r\n    this.getInfo();\r\n  }\r\n  openModal(targetModal) {\r\n    this.modalService.open(targetModal, {\r\n      centered: true,\r\n      backdrop: 'static',\r\n      keyboard: false,\r\n      windowClass: 'my-modal',\r\n      size: \"xl\",\r\n      /* size: 'sm' */\r\n      // size: \"lg\",\r\n      // windowClass: 'my-modal'\r\n    });\r\n  }\r\n  closeBtnClick() {\r\n    this.modalService.dismissAll();\r\n    // this.newRolForm.reset();\r\n    // this.RolForm.reset();\r\n    // this.IdRoltoDelete = '';\r\n    this.ngOnInit();\r\n    // this.isEditing = false;\r\n  }\r\n  editar(rol, modal) {\r\n    debugger\r\n    this.isLoadingInEdition = true;\r\n    this.isEditing = false;\r\n    this.actualActivity = rol\r\n    this.RolForm.controls.RolName.setValue(rol.name)\r\n    this.RolForm.controls.RolName.disable();\r\n    //obtenemos las vistas\r\n    this._rolViewService.getShowViews(rol.wf_activity_id).toPromise().then((response) => {\r\n      debugger\r\n      console.log('SHOW VIEWS')\r\n      console.log(response)\r\n      this.showViews = response\r\n      for (let i = 0; i < response.length; i++) {\r\n        this._rolViewService.getRolForViews(rol.wf_activity_id, response[i].wf_view_id).toPromise().then((response2) => {\r\n          debugger\r\n          this.showViews[i].rol = response2\r\n        })\r\n      }\r\n    })\r\n    console.log(this.showViews)\r\n    this.isLoadingInEdition = false;\r\n    this.openModal(modal)\r\n  }\r\n  getDefault(activity) {\r\n    let find = activity.dataviews?.find((item) => item.is_default == 1)\r\n    if (find) {\r\n      let find2 = this.allViews.find((item) => item.wf_view_id == find.wf_view_id)\r\n      if (find2)\r\n        return find2.name\r\n      return 'Cargando'\r\n    } else {\r\n      return 'No asignada'\r\n    }\r\n  }\r\n  getNameView(find) {\r\n    let find2 = this.allViews.find((item) => item.wf_view_id == find.wf_view_id)\r\n    return find2.name\r\n  }\r\n  changeDefault(activity, value) {\r\n    console.log(activity)\r\n    this._rolViewService.changeDefault(activity.wf_activity_id, activity.wf_view_id, value).toPromise().then((response) => {\r\n      console.log(response)\r\n      this.closeBtnClick()\r\n    }).catch((e) => {\r\n      console.log('error')\r\n    })\r\n  }\r\n  async startMod() {\r\n    this.isEditing = true\r\n    this.isLoadingInEdition = true;\r\n    this.isCalculatinPermissions = true;\r\n    let allrols = []\r\n    await this._rolservice.getRols(10000, 0, [], []).toPromise().then((response) => {\r\n      allrols = response.data\r\n      allrols.push({\r\n        name: null,\r\n        rol_id: -1\r\n      })\r\n    })\r\n    //tenemos que replicar por todos las vistas\r\n    let allviews: any = this.allViews\r\n\r\n    for (let i = 0; i < allviews.length; i++) {\r\n      //Tenemos que buscar las vistas y por cada vista ver los roles que hacen match para ponerle check\r\n\r\n      let checks = []\r\n      //buscamos primero si la vista esta en los roles\r\n      let findview = this.showViews.find((item) => item.name == allviews[i].name)\r\n      let auxrols = findview ? findview.rol : []\r\n      for (let j = 0; j < allrols.length; j++) {\r\n        let rol = allrols[j]\r\n        //hacer match \r\n        let find = auxrols.find((item) => item.rol?.name == rol.name)\r\n        let check = {\r\n          name: rol.name,\r\n          id: rol.rol_id,\r\n          value: find ? true : false\r\n        }\r\n        checks.push(check)\r\n      }\r\n      allviews[i].checks = checks\r\n    }\r\n    this.allCheckForm = allviews\r\n    this.isCalculatinPermissions = false;\r\n    this.isLoadingInEdition = false;\r\n    console.log(this.allCheckForm)\r\n    return\r\n  }\r\n  onCheckChange(event, view, rol) {\r\n    console.log(view)\r\n    console.log(rol)\r\n    //cambiamos de valor\r\n    console.log(this.allCheckForm)\r\n\r\n    let findview = this.allCheckForm.findIndex((item: any) => item.wf_view_id == view.wf_view_id)\r\n    let check = this.allCheckForm[findview].checks.findIndex((item) => item.id == rol.id)\r\n\r\n    this.allCheckForm[findview].checks[check].value = event.target.checked\r\n  }\r\n  saveChanges() {\r\n    this.spinner.show();\r\n    this.spinnerMessage = 'Modificando rol...';\r\n    console.log(this.allCheckForm)\r\n    this._rolViewService.saveRols(this.allCheckForm, this.actualActivity.wf_activity_id).toPromise().then((response) => {\r\n      console.log(response)\r\n      this.spinnerMessage = 'Cargando Información...';\r\n      this.spinner.hide()\r\n      this.modalService.dismissAll()\r\n      this.getInfo()\r\n    })\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RolviewComponent } from './rolview.component';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\r\nimport { NotifierModule } from 'angular-notifier';\r\nimport { NgMultiSelectDropDownModule } from 'ng-multiselect-dropdown';\r\nimport { NgxSpinnerModule } from 'ngx-spinner';\r\n\r\nimport { PipesModule } from 'src/app/pipes/pipes.module';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { SpinnerComponent } from '../rol/spinner/spinner.component';\r\nimport { NzTabsModule } from 'ng-zorro-antd/tabs';\r\n\r\nconst routes: Routes = [\r\n\r\n  {\r\n    path: '',\r\n    data: {\r\n      title: 'Roles',\r\n      urls: [\r\n        { title: 'Roles', url: '/rolview' },\r\n        { title: 'Listado de Roles' }\r\n\r\n      ]\r\n    },\r\n    component: RolviewComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  declarations: [RolviewComponent],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgbModule,\r\n    NotifierModule,\r\n    NgxSpinnerModule,\r\n    SharedModule,\r\n    ReactiveFormsModule,\r\n    PipesModule,\r\n    NgMultiSelectDropDownModule,\r\n    RouterModule.forChild(routes),\r\n    NzTabsModule,\r\n  ]\r\n})\r\nexport class RolviewModule { }\r\n","import { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { environment } from 'src/environments/environment';\r\nimport { GetWF_DocumentResponse } from '../models/wf_document.model';\r\nconst httpOptions = {\r\n  headers: new HttpHeaders(\r\n    {\r\n      'Content-Type': 'application/json',\r\n      /* 'Access-Control-Allow-Credentials': 'true' */\r\n    }),\r\n  responseType: 'json' as const,\r\n  //withCredentials: true as const,  \r\n  observe: 'response' as const\r\n};\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class RolviewService {\r\n\r\n  constructor(private http: HttpClient) { }\r\n  getRols(limit: number, offset: number, searchItem: string[]) {\r\n    let uri = `${environment.urlRolView}?limit=${limit}&offset=${offset}`\r\n    if (searchItem.length != 0) { for (let i = 0; i < searchItem.length; i++) { uri = uri + `&searchItem=${searchItem[i]}`; } }\r\n    return this.http.get<any>(uri, httpOptions).pipe(\r\n      map((response) => {\r\n        return response.body.data\r\n      })\r\n    )\r\n  }\r\n  getCountRols(id: number) {\r\n    let uri = `${environment.urlRolView}/${id}`\r\n    return this.http.get<any>(uri, httpOptions).pipe(\r\n      map((response) => {\r\n        return response.body.data\r\n      })\r\n    )\r\n  }\r\n  getCountViews(id: number) {\r\n    let uri = `${environment.urlRolView}/view/${id}`\r\n    return this.http.get<any>(uri, httpOptions).pipe(\r\n      map((response) => {\r\n        return response.body.data\r\n      })\r\n    )\r\n  }\r\n  getAllViews() {\r\n    let uri = `${environment.urlRolView}/allviews`\r\n    return this.http.get<any>(uri, httpOptions).pipe(\r\n      map((response) => {\r\n        return response.body.data\r\n      })\r\n    )\r\n  }\r\n  getShowViews(activity_id: number) {\r\n    let uri = `${environment.urlRolView}/getShowViews/${activity_id}`\r\n    return this.http.get<any>(uri, httpOptions).pipe(\r\n      map((response) => {\r\n        return response.body.data\r\n      })\r\n    )\r\n  }\r\n  getRolForViews(activity_id: number, view_id: number) {\r\n    let uri = `${environment.urlRolView}/rolview/${activity_id}/${view_id}`\r\n    return this.http.get<any>(uri, httpOptions).pipe(\r\n      map((response) => {\r\n        return response.body.data\r\n      })\r\n    )\r\n  }\r\n  saveRols(rols: any, activity_id: number) {\r\n    let uri = `${environment.urlRolView}/saverols`\r\n    let format = {\r\n      rols,\r\n      activity_id\r\n    }\r\n    return this.http.post<any>(uri, format, httpOptions).pipe(\r\n      map((response) => {\r\n        return response.body.data\r\n      })\r\n    )\r\n  }\r\n  changeDefault(activity_id,view_id, value: number) {\r\n    let uri = `${environment.urlRolView}/changedefault`\r\n    let format = {\r\n      activity_id,\r\n      view_id,\r\n      value\r\n    }\r\n    return this.http.put<any>(uri,format,httpOptions)\r\n  }\r\n}\r\n"]}