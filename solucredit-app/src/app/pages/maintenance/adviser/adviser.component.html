<div class="col-12">
    <div class="card card-body">
        <ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#759ee0" type="ball-scale-multiple">
            <p style="font-size: 20px; color:#fff">Cargando Información...</p>
        </ngx-spinner>

        <div class="d-flex mb-3 mt-3">
            <div class="m-t-20">

                <form [formGroup]="search">
                    <div class="row">
                        <div class="col-sm-12 col-lg-12">
                            <div class="form-group row">
                                <div class="input-group col-sm-12">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text" id="basic-addon1">
                                            <i class="ti-search"></i>
                                        </span>
                                    </div>

                                    <input class="form-control" formControlName="q" (change)="searchTerm()"
                                        [placeholder]="placeholder" type="text" />
                                </div>
                            </div>
                        </div>

                    </div>
                </form>
            </div>
            <button *ngIf="canCreate()" class="btn btn-primary ml-auto h-25 "
                style="background-color: #3473da;border-color: #3473da; " (click)="openCreate(newDist)">Nuevo
                Asesor</button>
        </div>
        <div *ngIf="canList()" class="table-responsive table-hover">
            <table class="table table-responsive-lg  v-middle white-table">
                <thead>
                    <tr>
                        <th *ngFor="let header of dataList.metadata">
                            <div class="text-center">
                                {{header}}
                            </div>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let request of dataList.data;let i=index;">
                        <td>
                            <div class="text-center">
                                {{i+1}}
                            </div>
                        </td>
                        <td style="text-align: left"> 
                            {{request.firstname}} {{request.lastname}}
                            <span *ngIf="request.is_default==1" class="label label-success font-weight-100">
                                Predeterminado
                            </span>
                        </td>
                        <td style="text-align: left">
                            {{request.email}}
                        </td>
                        <td style="text-align: left">
                            {{getType(request.id_adviser_type)}}

                        </td>
                        <td style="text-align: left">
                            {{request.holder==1?'Es titular':request.infoHolder?(request.infoHolder?.firstname+'
                            '+request.infoHolder?.lastname):''}}

                        </td>

                        <td>
                            <div class="div-table-actions">
                                <button *ngIf="canSee()" class="btn btn-raised mr-1 text-white btn-info"
                                    (click)="show(viewDis,request)" type="button"><span class="btn-label m-r-5"><i
                                            class="mdi mdi-eye-outline"></i></span>Ver</button>
                                <button class="btn btn-raised mr-1 text-white  btn-color-solucredit" type="button"
                                    *ngIf="canEdit()" (click)="edit(editModal,request)"><span class="btn-label m-r-5"><i
                                            class=" icon-pencil"></i></span>Editar</button>
                                <button *ngIf="canDelete()" (click)="showAlertDelete(request)"
                                    class="btn btn-danger waves-effect waves-light" type="button">
                                    <span class="btn-label m-r-5"><i class="mdi mdi-delete"></i></span>Eliminar</button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <div class="d-flex justify-content-center p-2">
                <ngb-pagination [collectionSize]="this.totalData" [pageSize]="pageSize" [(page)]="page"
                    aria-label="Default pagination" (pageChange)="pageChange($event)" [boundaryLinks]="true"
                    [maxSize]="7"></ngb-pagination>
            </div>
        </div>
    </div>
</div>

<ng-template #newDist let-modal>
    <div class="modal-header">
        <h3 class="modal-title">Crear un nuevo {{title}}</h3>
        <button type="button" class="close" (click)="closeBtnClick()" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form class="form-horizontal" [formGroup]="newAdviserForm" (ngSubmit)="saveAdviser()">
            <div class="form-group row">
                <label for="email" class="col-sm-2 text-right control-label col-form-label">Correo Electrónico</label>
                <div class="col-sm-4 ">
                    <div class="input-group col-sm-12 ">
                        <div class="input-group-prepend ">
                            <span class="input-group-text " id="basic-addon1">
                                <i class=" icon-note"></i>
                            </span>
                        </div>
                        <input type="email" class="form-control " formControlName="email" required
                            placeholder="Ingresar Correo" (change)="searchEmail($event.target.value)">
                    </div>
                    <small class="form-text text-danger"
                        *ngIf="!newAdviserForm.get('email').valid && (newAdviserForm.get('email').dirty || newAdviserForm.get('email').touched)">El
                        correo es requerido</small>
                </div>
            </div>
            <div class="form-group row">
                <label for="email" class="col-sm-2 text-right control-label col-form-label">Nombres</label>
                <div class="col-sm-4">
                    <div class="input-group col-sm-12 ">
                        <div class="input-group-prepend ">
                            <span class="input-group-text " id="basic-addon1">
                                <i class=" icon-note"></i>
                            </span>
                        </div>
                        <input type="text" class="form-control " formControlName="firstname" required
                            placeholder="Ingresar Nombre">
                    </div>
                    <small class="form-text text-danger"
                        *ngIf="!newAdviserForm.get('firstname').valid && (newAdviserForm.get('firstname').dirty || newAdviserForm.get('firstname').touched)">{{spanNameMessage}}</small>
                </div>
                <label for="email" class="col-sm-2 text-right control-label col-form-label">Apellidos</label>
                <div class="col-sm-4 ">
                    <div class="input-group col-sm-12 ">
                        <div class="input-group-prepend ">
                            <span class="input-group-text " id="basic-addon1">
                                <i class=" icon-note"></i>
                            </span>
                        </div>
                        <input type="text" class="form-control " formControlName="lastname" required
                            placeholder="Ingresar Apellidos">
                    </div>
                    <small class="form-text text-danger"
                        *ngIf="!newAdviserForm.get('lastname').valid && (newAdviserForm.get('lastname').dirty || newAdviserForm.get('lastname').touched)">{{spanNameMessage}}</small>
                </div>
            </div>

            <!--Second group-->
            <div class="form-group row" style="margin-top: 25px;">
                <label for="email" class="col-sm-2 text-right control-label col-form-label">Dirección</label>
                <div class="col-sm-4 ">
                    <div class="input-group col-sm-12 ">
                        <div class="input-group-prepend ">
                            <span class="input-group-text " id="basic-addon1">
                                <i class="far fa-map"></i>
                            </span>
                        </div>
                        <input type="text" class="form-control " formControlName="address" required
                            placeholder="Ingresar Dirección">
                    </div>
                    <small class="form-text text-danger"
                        *ngIf="!newAdviserForm.get('address').valid && (newAdviserForm.get('address').dirty || newAdviserForm.get('address').touched)">{{spanNameMessage}}</small>
                </div>
                <label for="email" class="col-sm-2 text-right control-label col-form-label">Teléfono</label>
                <div class="col-sm-4 ">
                    <div class="input-group col-sm-12 ">
                        <div class="input-group-prepend ">
                            <span class="input-group-text " id="basic-addon1">
                                <i class=" icon-phone"></i>
                            </span>
                        </div>
                        <input type="tel" class="form-control " formControlName="phone" required maxlength="8"
                            placeholder="Ingresar Teléfono">
                    </div>
                    <small class="form-text text-danger col-sm-12"
                        *ngIf="newAdviserForm.get('phone').errors?.pattern">El formato es incorrecto.</small>
                    <small class="form-text text-danger"
                        *ngIf="!newAdviserForm.get('phone').valid && (newAdviserForm.get('phone').dirty || newAdviserForm.get('phone').touched) && !newAdviserForm.get('phone').errors?.pattern">{{spanNameMessage}}</small>
                </div>
            </div>

            <!-- 3 Group-->
            <div class="form-group row" style="margin-top: 25px;">
                <label for="email" class="col-sm-2 text-right control-label col-form-label">Código Profesional</label>
                <div class="col-sm-4 ">
                    <div class="input-group col-sm-12 ">
                        <div class="input-group-prepend ">
                            <span class="input-group-text " id="basic-addon1">
                                <i class="fas fa-briefcase"></i>
                            </span>
                        </div>
                        <input type="text" class="form-control " formControlName="professional_code" required
                            placeholder="Ingresar Código Profesional">
                    </div>
                    <small class="form-text text-danger"
                        *ngIf="!newAdviserForm.get('professional_code').valid && (newAdviserForm.get('professional_code').dirty || newAdviserForm.get('professional_code').touched)">{{spanNameMessage}}</small>
                </div>
                <label for="email" class="col-sm-2 text-right control-label col-form-label">Tipo de asesor</label>
                <div class="col-sm-4 ">
                    <div class="input-group col-sm-12 ">
                        <div class="input-group-prepend ">
                            <span class="input-group-text " id="basic-addon1">
                                <i class="far fa-user"></i>
                            </span>
                        </div>
                        <select class="custom-select" id="id_adviser_type" (change)="onChange($event.target.value)"
                            [disabled]="!this.newAdviserForm.get('professional_code').enabled">
                            <option value="" selected disabled hidden>Seleccionar</option>
                            <option [value]="currency.id_adviser_type" *ngFor="let currency of this.dataAdviserType">
                                {{currency.adviser_type}}</option>
                        </select>
                    </div>
                    <small class="form-text text-danger"
                        *ngIf="!newAdviserForm.get('id_adviser_type').valid && (newAdviserForm.get('id_adviser_type').dirty || newAdviserForm.get('id_adviser_type').touched)">{{spanNameMessage}}</small>
                </div>
            </div>

            <!-- Grupo 4-->
            <div class="form-group row" style="margin-top: 25px;">
                <label for="email" class="col-sm-2 text-right control-label col-form-label">¿Es del equipo
                    solucredit?</label>
                <div class="col-sm-4 ">
                    <div class="input-group col-sm-12" style="margin-top: 1.40%;">
                        <div [ngClass]="'col-sm-2'">
                            <div class="custom-control custom-radio">
                                <input type="radio" id="sipertenece" name="outsourcing" [ngValue]="1"
                                    class="custom-control-input" (change)="changeOutsorcing(1)"
                                    [disabled]="!this.newAdviserForm.get('professional_code').enabled">
                                <label class="custom-control-label custom-label" for="sipertenece">Si</label>
                            </div>
                        </div>
                        <div [ngClass]="'col-sm-2'">
                            <div class="custom-control custom-radio">
                                <input type="radio" id="nopertenece" name="outsourcing" [ngValue]="0"
                                    class="custom-control-input" (change)="changeOutsorcing(0)"
                                    [disabled]="!this.newAdviserForm.get('professional_code').enabled">
                                <label class="custom-control-label custom-label" for="nopertenece">No</label>
                            </div>
                        </div>
                    </div>
                    <small class="form-text text-danger"
                        *ngIf="!newAdviserForm.get('professional_code').valid && (newAdviserForm.get('professional_code').dirty || newAdviserForm.get('professional_code').touched)">{{spanNameMessage}}</small>
                </div>
                <label *ngIf="newAdviserForm.controls['outsourcing'].value==1" for="email"
                    class="col-sm-2 text-right control-label col-form-label">¿Es titular?</label>
                <div *ngIf="newAdviserForm.controls['outsourcing'].value==1" class="col-sm-4 ">
                    <div class="input-group col-sm-12" style="margin-top: 1.40%;">
                        <div [ngClass]="'col-sm-2'">
                            <div class="custom-control custom-radio">
                                <input type="radio" id="sititular" name="holder" [ngValue]="1"
                                    class="custom-control-input" (change)="changeHolder(1)"
                                    [disabled]="!this.newAdviserForm.get('professional_code').enabled">
                                <label class="custom-control-label custom-label" for="sititular">Si</label>
                            </div>
                        </div>
                        <div [ngClass]="'col-sm-2'">
                            <div class="custom-control custom-radio">
                                <input type="radio" id="notitular" name="holder" [ngValue]="0"
                                    class="custom-control-input" (change)="changeHolder(0)"
                                    [disabled]="!this.newAdviserForm.get('professional_code').enabled">
                                <label class="custom-control-label custom-label" for="notitular">No</label>
                            </div>
                        </div>
                    </div>
                    <small class="form-text text-danger"
                        *ngIf="!newAdviserForm.get('holder').valid && (newAdviserForm.get('holder').dirty || newAdviserForm.get('holder').touched)">{{spanNameMessage}}</small>
                </div>
            </div>

            <!--Grupo 5-->
            <div class="form-group row" style="margin-top: 25px;">
                <label *ngIf="newAdviserForm.controls['holder'].value==0" for="email"
                    class="col-sm-2 text-right control-label col-form-label">Titular/Responsable</label>
                <div class="col-sm-4 " *ngIf="newAdviserForm.controls['holder'].value==0">
                    <div class="input-group col-sm-12">
                        <div class="input-group-prepend ">
                            <span class="input-group-text " id="basic-addon1">
                                <i class="fas fa-briefcase"></i>
                            </span>
                        </div>
                        <select class="custom-select" id="id_adviser_type"
                            (change)="onChangeHolder($event.target.value)"
                            [disabled]="!this.newAdviserForm.get('professional_code').enabled">
                            <option value="" selected disabled hidden>Seleccionar</option>
                            <option [value]="currency.id_adviser" *ngFor="let currency of this.showHolders">
                                {{currency.firstname}} {{currency.lastname}}</option>
                        </select>
                    </div>
                    <small class="form-text text-danger"
                        *ngIf="!newAdviserForm.get('professional_code').valid && (newAdviserForm.get('professional_code').dirty || newAdviserForm.get('professional_code').touched)">{{spanNameMessage}}</small>
                </div>
                <label for="is_default" class="col-sm-2 text-right control-label col-form-label">Predeterminado</label>
                <div class="col-sm-4 ">
                    <div class="input-group col-sm-12" style="margin-top: 1.40%;">
                        <div [ngClass]="'col-sm-2'">
                            <div class="custom-control custom-radio">
                                <input type="radio" id="sipredeterminado" name="is_default" [ngValue]="1"
                                    class="custom-control-input" (change)="changeDefault(1)">
                                <label class="custom-control-label custom-label" for="sipredeterminado">Si</label>
                            </div>
                        </div>
                        <div [ngClass]="'col-sm-2'">
                            <div class="custom-control custom-radio">
                                <input type="radio" id="nopredeterminado" name="is_default" [ngValue]="0"
                                    class="custom-control-input" (change)="changeDefault(0)">
                                <label class="custom-control-label custom-label" for="nopredeterminado">No</label>
                            </div>
                        </div>
                    </div>
                    <small class="form-text text-secondary">
                        <strong>Usuario Predeterminado: </strong>
                        {{defaultAdviser==null? 'Aún no seleccionado':(defaultAdviser.firstname+ '
                        '+defaultAdviser.lastname)}}
                    </small>
                </div>
            </div>
            <!--Imagen-->
            <div class="form-group row">
                <label for="email" class="col-sm-2 text-right control-label col-form-label">Seleccionar Firma
                    Electrónica</label>
                <div class="col-sm-8">
                    <div class="input-group col-sm-6 ">
                        <div class="input-group-prepend ">
                            <span class="input-group-text " id="basic-addon1">
                                <i class="far fa-images"></i>
                            </span>
                        </div>

                        <div class="custom-file">
                            <input type="file" class="custom-file-input" id="inputlogo"
                                (change)="showPreviewImage($event)" [accept]="inputTipeImage"
                                [disabled]="!this.newAdviserForm.get('professional_code').enabled">

                            <label class="custom-file-label" for="inputlogo">Selecciona una imagen</label>
                        </div>
                    </div>
                    <small class="form-text text-danger"
                        *ngIf="!newAdviserForm.get('email').valid && (newAdviserForm.get('email').dirty || newAdviserForm.get('email').touched)">El
                        correo es requerido</small>
                </div>
            </div>
            <div class="form-group row" style="margin-top: 25px;">
                <div class="col-sm-5 text-left control-label col-form-label ml-5">
                    <h4>
                        <strong>
                            Recomendaciones
                        </strong>
                    </h4>
                    <li *ngFor="let item of recomendations">{{item}}</li>
                </div>
                <div class="col-sm">
                    <img [src]="localUrl" *ngIf="localUrl" class="imgPlaceholder">
                </div>
            </div>


            <div class="modal-footer border-top-0">
                <small class="form-text text-danger" *ngIf="message.length>0">{{message}}</small>
                <button type="submit" class="btn btn-raised mr-1 text-white" [disabled]="!isCorrectForm()"
                    style="background-color: #3473da;">Agregar tipo de {{title}}</button>
                <button type="button" class="btn btn-raised mr-1 text-white  btn-color-solucredit-secondary"
                    (click)="closeBtnClick()">Cancelar</button>
            </div>
        </form>
    </div>
</ng-template>

<ng-template #viewDis let-modal>
    <div class="modal-header">
        <h3 class="modal-title">Visualización de {{title}}</h3>
        <button type="button" class="close" (click)="closeBtnClick()" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="card-body">
        <form class="form-horizontal">
            <div class="container">
                <div class="row">
                    <div class="col-sm" style="text-align: left;">
                        <label for="first_name">
                            <i class="fas fa-user"></i>
                            Nombres:
                        </label>
                    </div>
                    <div class="col-sm" style="text-align: left;">
                        <h5>{{this.actualAdviser.firstname}}</h5>
                    </div>
                    <div class="col-sm" style="text-align: left;">
                        <label for="first_name">
                            <i class="far fa-user"></i>
                            Apellidos:
                        </label>
                    </div>
                    <div class="col-sm" style="text-align: left;">
                        <h5>{{this.actualAdviser.lastname}}</h5>
                    </div>
                </div>
            </div>
            <hr class="rounded">
            <div class="container">
                <div class="row">
                    <div class="col-sm" style="text-align: left;">
                        <label for="first_name">
                            <i class="far fa-map"></i>
                            Dirección:
                        </label>
                    </div>
                    <div class="col-sm" style="text-align: left;">
                        <h5>{{this.actualAdviser.address}}</h5>
                    </div>
                    <div class="col-sm" style="text-align: left;">
                        <label for="first_name">
                            <i class="far fa-envelope"></i>
                            Correo:
                        </label>
                    </div>
                    <div class="col-sm" style="text-align: left;">
                        <h5>{{this.actualAdviser.email}}</h5>
                    </div>
                </div>
            </div>
            <hr class="rounded">
            <div class="container">
                <div class="row">
                    <div class="col-sm" style="text-align: left;">
                        <label for="first_name">
                            <i class="fas fa-user"></i>
                            Tipo de Asesor:
                        </label>
                    </div>
                    <div class="col-sm" style="text-align: left;">
                        <h5>{{this.getType(this.actualAdviser.id_adviser_type)}}</h5>
                    </div>
                    <div class="col-sm" style="text-align: left;">
                        <label for="first_name">
                            <i class="fas fa-qrcode"></i>
                            Código Profesional :
                        </label>
                    </div>
                    <div class="col-sm" style="text-align: left;">
                        <h5>{{this.actualAdviser.professional_code}}</h5>
                    </div>
                </div>
            </div>
            <hr class="rounded">
            <div class="container">
                <div class="row">
                    <div class="col-sm" style="text-align: left;">
                        <label for="first_name">
                            <i class="fas fa-user"></i>
                            Equipo de Solucredit:
                        </label>
                    </div>
                    <div class="col-sm" style="text-align: left;">
                        <h5>{{this.actualAdviser.outsourcing==1?'No':'Si'}}</h5>
                    </div>
                    <div class="col-sm" style="text-align: left;">
                        <label for="first_name">
                            <i class="fas fa-id-card"></i>
                            Titular :
                        </label>
                    </div>
                    <div class="col-sm" style="text-align: left;">
                        <h5>{{this.actualAdviser.holder==1?'Es titular':this.actualAdviser.infoHolder?.firstname+'
                            '+this.actualAdviser.infoHolder?.lastname}}</h5>
                    </div>
                </div>
            </div>
            <hr class="rounded">
            <div class="container">
                <div class="row">
                    <div class="col-sm-2" style="text-align: left;" *ngIf="this.actualAdviser.holder==0">
                        <label for="first_name">
                            <i class="far fa-envelope"></i>
                            Correo del Titular:
                        </label>
                    </div>
                    <div class="col-sm-4" style="text-align: left;" *ngIf="this.actualAdviser.holder==0">
                        <h5>{{this.actualAdviser.infoHolder?.email}}</h5>
                    </div>
                    <div class="form-group row">
                        <label for="email" class="col-sm-2 text-right control-label col-form-label">Firma</label>
                        <div class="col-sm-6 ">
                            <br>
                            <div class="input-group col-sm-12 ">
                                <div class="custom-file">

                                    <img [src]="localUrl" *ngIf="localUrl" class="imgPlaceholder">

                                </div>
                            </div>


                        </div>
                    </div>

                </div>
            </div>

            <div class="modal-footer border-top-0">

                <button type="button" class="btn btn-raised mr-1 text-white"
                *ngIf="canEdit()"
                    (click)="edit(editModal,this.actualAdviser)" style="background-color: #3473da;">Modificar</button>
            </div>
        </form>
    </div>
</ng-template>


<ng-template #editModal let-modal>
    <div class="modal-header">
        <h3 class="modal-title">Editar un {{title}}</h3>
        <button type="button" class="close" (click)="closeBtnClick()" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form class="form-horizontal" [formGroup]="newAdviserForm" (ngSubmit)="saveChanges()">
            <div class="form-group row">
                <label for="email" class="col-sm-2 text-right control-label col-form-label">Correo Electrónico</label>
                <div class="col-sm-4 ">
                    <div class="input-group col-sm-12 ">
                        <div class="input-group-prepend ">
                            <span class="input-group-text " id="basic-addon1">
                                <i class=" icon-note"></i>
                            </span>
                        </div>
                        <input type="text" class="form-control " formControlName="email" required
                            placeholder="Ingresar Correo" (change)="searchEmail($event.target.value)"
                            [attr.disabled]="true">
                    </div>
                    <small class="form-text text-danger"
                        *ngIf="!newAdviserForm.get('email').valid && (newAdviserForm.get('email').dirty || newAdviserForm.get('email').touched)">El
                        correo es requerido</small>
                </div>
            </div>
            <div class="form-group row">
                <label for="email" class="col-sm-2 text-right control-label col-form-label">Nombres</label>
                <div class="col-sm-4">
                    <div class="input-group col-sm-12 ">
                        <div class="input-group-prepend ">
                            <span class="input-group-text " id="basic-addon1">
                                <i class=" icon-note"></i>
                            </span>
                        </div>
                        <input type="text" class="form-control " formControlName="firstname" required
                            placeholder="Ingresar Nombre">
                    </div>
                    <small class="form-text text-danger"
                        *ngIf="!newAdviserForm.get('firstname').valid && (newAdviserForm.get('firstname').dirty || newAdviserForm.get('firstname').touched)">{{spanNameMessage}}</small>
                </div>
                <label for="email" class="col-sm-2 text-right control-label col-form-label">Apellidos</label>
                <div class="col-sm-4 ">
                    <div class="input-group col-sm-12 ">
                        <div class="input-group-prepend ">
                            <span class="input-group-text " id="basic-addon1">
                                <i class=" icon-note"></i>
                            </span>
                        </div>
                        <input type="text" class="form-control " formControlName="lastname" required
                            placeholder="Ingresar Apellidos">
                    </div>
                    <small class="form-text text-danger"
                        *ngIf="!newAdviserForm.get('lastname').valid && (newAdviserForm.get('lastname').dirty || newAdviserForm.get('lastname').touched)">{{spanNameMessage}}</small>
                </div>
            </div>

            <!--Second group-->
            <div class="form-group row" style="margin-top: 25px;">
                <label for="email" class="col-sm-2 text-right control-label col-form-label">Dirección</label>
                <div class="col-sm-4 ">
                    <div class="input-group col-sm-12 ">
                        <div class="input-group-prepend ">
                            <span class="input-group-text " id="basic-addon1">
                                <i class="far fa-map"></i>
                            </span>
                        </div>
                        <input type="text" class="form-control " formControlName="address" required
                            placeholder="Ingresar Dirección">
                    </div>
                    <small class="form-text text-danger"
                        *ngIf="!newAdviserForm.get('address').valid && (newAdviserForm.get('address').dirty || newAdviserForm.get('address').touched)">{{spanNameMessage}}</small>
                </div>
                <label for="email" class="col-sm-2 text-right control-label col-form-label">Teléfono</label>
                <div class="col-sm-4 ">
                    <div class="input-group col-sm-12 ">
                        <div class="input-group-prepend ">
                            <span class="input-group-text " id="basic-addon1">
                                <i class=" icon-phone"></i>
                            </span>
                        </div>
                        <input type="tel" class="form-control " formControlName="phone" required maxlength="8"
                            placeholder="Ingresar Teléfono">
                    </div>
                    <small class="form-text text-danger col-sm-12"
                        *ngIf="newAdviserForm.get('phone').errors?.pattern">El formato es incorrecto.</small>
                    <small class="form-text text-danger"
                        *ngIf="!newAdviserForm.get('phone').valid && (newAdviserForm.get('phone').dirty || newAdviserForm.get('phone').touched) && !newAdviserForm.get('phone').errors?.pattern">{{spanNameMessage}}</small>
                </div>
            </div>

            <!-- 3 Group-->
            <div class="form-group row" style="margin-top: 25px;">
                <label for="email" class="col-sm-2 text-right control-label col-form-label">Código Profesional</label>
                <div class="col-sm-4 ">
                    <div class="input-group col-sm-12 ">
                        <div class="input-group-prepend ">
                            <span class="input-group-text " id="basic-addon1">
                                <i class="fas fa-briefcase"></i>
                            </span>
                        </div>
                        <input type="text" class="form-control " formControlName="professional_code" required
                            placeholder="Ingresar Código Profesional">
                    </div>
                    <small class="form-text text-danger"
                        *ngIf="!newAdviserForm.get('professional_code').valid && (newAdviserForm.get('professional_code').dirty || newAdviserForm.get('professional_code').touched)">{{spanNameMessage}}</small>
                </div>
                <label for="email" class="col-sm-2 text-right control-label col-form-label">Tipo de asesor</label>
                <div class="col-sm-4 ">
                    <div class="input-group col-sm-12 ">
                        <div class="input-group-prepend ">
                            <span class="input-group-text " id="basic-addon1">
                                <i class="far fa-user"></i>
                            </span>
                        </div>
                        <select class="custom-select" id="id_adviser_type" formControlName="id_adviser_type">

                            <option [ngValue]="currency.id_adviser_type" *ngFor="let currency of this.dataAdviserType">
                                {{currency.adviser_type}}</option>
                        </select>
                    </div>
                    <small class="form-text text-danger"
                        *ngIf="!newAdviserForm.get('id_adviser_type').valid && (newAdviserForm.get('id_adviser_type').dirty || newAdviserForm.get('id_adviser_type').touched)">{{spanNameMessage}}</small>
                </div>
            </div>

            <!-- Grupo 4-->
            <div class="form-group row" style="margin-top: 25px;">
                <label for="email" class="col-sm-2 text-right control-label col-form-label">¿Es del equipo
                    solucredit?</label>
                <div class="col-sm-4 ">
                    <div class="input-group col-sm-12" style="margin-top: 1.35%;">
                        <div [ngClass]="'col-sm-2'">
                            <div class="custom-control custom-radio">
                                <input type="radio" id="sipertenece" name="outsourcing" [ngValue]="1"
                                    [checked]="radio1==0?true:false" class="custom-control-input"
                                    (change)="changeOutsorcing(1)"
                                    [disabled]="!this.newAdviserForm.get('professional_code').enabled">
                                <label class="custom-control-label custom-label" for="sipertenece">Si</label>
                            </div>
                        </div>
                        <div [ngClass]="'col-sm-2'">
                            <div class="custom-control custom-radio">
                                <input type="radio" id="nopertenece" name="outsourcing" [ngValue]="0"
                                    [checked]="radio1==1?true:false" class="custom-control-input"
                                    (change)="changeOutsorcing(0)"
                                    [disabled]="!this.newAdviserForm.get('professional_code').enabled">
                                <label class="custom-control-label custom-label" for="nopertenece">No</label>
                            </div>
                        </div>
                    </div>
                    <small class="form-text text-danger"
                        *ngIf="!newAdviserForm.get('professional_code').valid && (newAdviserForm.get('professional_code').dirty || newAdviserForm.get('professional_code').touched)">{{spanNameMessage}}</small>
                </div>
                <label *ngIf="newAdviserForm.controls['outsourcing'].value==1" for="email"
                    class="col-sm-2 text-right control-label col-form-label">¿Es titular?</label>
                <div *ngIf="newAdviserForm.controls['outsourcing'].value==1" class="col-sm-4 ">
                    <div class="input-group col-sm-12" style="margin-top: 1.35%;">
                        <div [ngClass]="'col-sm-2'">
                            <div class="custom-control custom-radio">
                                <input type="radio" id="sititular" name="holder" [ngValue]="radio1"
                                    class="custom-control-input" (change)="changeHolder(1)"
                                    [checked]="radio2==1?true:false"
                                    [disabled]="!this.newAdviserForm.get('professional_code').enabled">
                                <label class="custom-control-label custom-label" for="sititular">Si</label>
                            </div>
                        </div>
                        <div [ngClass]="'col-sm-2'">
                            <div class="custom-control custom-radio">
                                <input type="radio" id="notitular" name="holder" [ngValue]="radio1"
                                    class="custom-control-input" (change)="changeHolder(0)"
                                    [checked]="radio2==0?true:false"
                                    [disabled]="!this.newAdviserForm.get('professional_code').enabled">
                                <label class="custom-control-label custom-label" for="notitular">No</label>
                            </div>
                        </div>
                    </div>
                    <small class="form-text text-danger"
                        *ngIf="!newAdviserForm.get('holder').valid && (newAdviserForm.get('holder').dirty || newAdviserForm.get('holder').touched)">{{spanNameMessage}}</small>
                </div>
            </div>

            <!--Grupo 5-->
            <div class="form-group row" style="margin-top: 25px;">
                <label *ngIf="newAdviserForm.controls['holder'].value==0" for="email"
                    class="col-sm-2 text-right control-label col-form-label">Titular/Responsable</label>
                <div class="col-sm-4 " *ngIf="newAdviserForm.controls['holder'].value==0">
                    <div class="input-group col-sm-12 ">
                        <div class="input-group-prepend ">
                            <span class="input-group-text " id="basic-addon1">
                                <i class="fas fa-briefcase"></i>
                            </span>
                        </div>
                        <select class="custom-select" id="id_holder" formControlName="id_holder">
                            <option [ngValue]="currency.id_adviser" *ngFor="let currency of this.showHolders">
                                {{currency.firstname}} {{currency.lastname}}</option>
                        </select>
                    </div>
                    <small class="form-text text-danger"
                        *ngIf="!newAdviserForm.get('professional_code').valid && (newAdviserForm.get('professional_code').dirty || newAdviserForm.get('professional_code').touched)">{{spanNameMessage}}</small>
                </div>
                <label for="is_default" class="col-sm-2 text-right control-label col-form-label">Predeterminado</label>
                <div class="col-sm-4 ">
                    <div class="input-group col-sm-12" style="margin-top: 1.40%;">
                        <div [ngClass]="'col-sm-2'">
                            <div class="custom-control custom-radio">
                                <input type="radio" id="sipredeterminado" name="is_default" [ngValue]="1"
                                    class="custom-control-input" (change)="changeDefault(1)"
                                    [checked]="radio3==1?true:false">
                                <label class="custom-control-label custom-label" for="sipredeterminado">Si</label>
                            </div>
                        </div>
                        <div [ngClass]="'col-sm-2'">
                            <div class="custom-control custom-radio">
                                <input type="radio" id="nopredeterminado" name="is_default" [ngValue]="0"
                                    class="custom-control-input" (change)="changeDefault(0)"
                                    [checked]="radio3==0?true:false">
                                <label class="custom-control-label custom-label" for="nopredeterminado">No</label>
                            </div>
                        </div>
                    </div>
                    <small class="form-text text-secondary">
                        <strong>Usuario Predeterminado: </strong>
                        {{defaultAdviser==null? 'Aún no seleccionado':(defaultAdviser.firstname+ '
                        '+defaultAdviser.lastname)}}
                    </small>
                </div>
            </div>
            <!--Imagen-->
            <div class="form-group row">
                <label for="email" class="col-sm-2 text-right control-label col-form-label">Seleccionar Firma
                    Electrónica</label>
                <div class="col-sm-8">
                    <div class="input-group col-sm-6">
                        <div class="input-group-prepend ">
                            <span class="input-group-text " id="basic-addon1">
                                <i class="far fa-images"></i>
                            </span>
                        </div>

                        <div class="custom-file">
                            <input type="file" class="custom-file-input" id="inputlogo"
                                (change)="showPreviewImage($event)"
                                [disabled]="!this.newAdviserForm.get('professional_code').enabled">

                            <label class="custom-file-label" for="inputlogo">Selecciona una imagen</label>
                        </div>
                    </div>
                    <small class="form-text text-danger"
                        *ngIf="!newAdviserForm.get('email').valid && (newAdviserForm.get('email').dirty || newAdviserForm.get('email').touched)">El
                        correo es requerido</small>
                </div>
            </div>
            <div class="form-group row" style="margin-top: 25px;">
                <div class="col-sm-5 text-left control-label col-form-label ml-5">
                    <h4>
                        <strong>
                            Recomendaciones
                        </strong>
                    </h4>
                    <li *ngFor="let item of recomendations">{{item}}</li>
                </div>
                <div class="col-sm">
                    <img [src]="localUrl" *ngIf="localUrl" class="imgPlaceholder">
                </div>

            </div>
            <div class="modal-footer border-top-0">
                <small class="form-text text-danger" *ngIf="message.length>0">{{message}}</small>
                <button type="submit" class="btn btn-raised mr-1 text-white" [disabled]="!isCorrectForm()"
                    style="background-color: #3473da;">Actualizar</button>
                <button type="button" class="btn btn-raised mr-1 text-white  btn-color-solucredit-secondary"
                    (click)="closeBtnClick()">Cancelar</button>
            </div>
        </form>
    </div>
</ng-template>